<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù„ÛŒØ³Øª Ù„ØºØª Ù‡Ø§</title>
  <link rel="stylesheet" href="./assets/css/Vazir-Code.css" />
  <script src="./assets/js/tailwind-browser@4.js"></script>
  <style>
    .syllable-badge {
      display: inline-block;
      padding: 2px 8px;
      margin: 2px;
      font-size: 0.8rem;
      border-radius: 4px;
      background: #e9ecef;
      color: #495057;
      font-family: 'Vazir Code', monospace;
    }
  </style>
</head>
<body class="bg-white text-gray-900 antialiased font-sans">

  <nav class="bg-gray-100 border-b border-gray-200 px-4 py-3 flex flex-wrap items-center justify-between sticky top-0 z-50">
    <a href="./index.html" class="text-xl font-bold text-gray-800 hover:text-gray-600 transition">
      ğŸ“š Ù¾Ø±ÙˆÚ˜Ù‡ Ù…ØªÙ† Ø¨Ø§Ø² Ø±ÛŒØªÙ…ÛŒÚ©
    </a>

    <button id="navbar-toggler" type="button" onclick="toggleNavbar()"
            class="block lg:hidden p-2 rounded-md text-gray-600 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-400">
      â˜°
    </button>

    <div id="navbarNav" class="hidden lg:flex lg:items-center lg:gap-4 w-full lg:w-auto mt-3 lg:mt-0">
      <ul class="flex flex-col lg:flex-row lg:space-x-4 rtl:space-x-reverse space-y-2 lg:space-y-0 w-full">
        <li>
          <a href="./index.html" class="block px-3 py-2 rounded-md text-gray-700 hover:bg-gray-200 transition">ØªØ­Ù„ÛŒÙ„ Ø´Ø¹Ø±</a>
        </li>
        <li>
          <a href="./list-words.html" class="block px-3 py-2 rounded-md text-blue-700 bg-blue-100 font-semibold">Ù„ÛŒØ³Øª Ú©Ù„Ù…Ø§Øª</a>
        </li>
        <li>
          <a href="./about.html" class="block px-3 py-2 rounded-md text-gray-700 hover:bg-gray-200 transition">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</a>
        </li>
      </ul>
    </div>

    <span class="text-gray-500 text-sm hidden sm:inline">
      Ú©Ù„ Ú©Ù„Ù…Ø§Øª: <span id="totalWords" class="font-semibold">Û°</span>
    </span>
  </nav>
  
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center">ğŸ“– Ú©Ù„Ù…Ø§Øª Ùˆ Ù‡Ø¬Ø§ÛŒ Ø¢Ù†â€ŒÙ‡Ø§</h1>

    <!-- Stats Cards - Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø¨Ø§ about Ùˆ index -->
    <div class="flex flex-wrap justify-center gap-4 mb-8">
      <div class="border border-gray-200 rounded-lg px-5 py-4 bg-white inline-flex gap-3 items-center justify-center shadow-sm">
        <span class="text-2xl text-red-500">ğŸ“</span>
        <div>
          <p class="text-xs text-gray-600 mb-1 font-medium">Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù…Ø­Ø§Ø³Ø¨Ù‡</p>
          <h4 class="text-xl font-bold count-word-need text-red-500">Û°</h4>
        </div>
      </div>
      <div class="border border-gray-200 rounded-lg px-5 py-4 bg-white inline-flex gap-3 items-center justify-center shadow-sm">
        <span class="text-2xl text-green-600">âœ…</span>
        <div>
          <p class="text-xs text-gray-600 mb-1 font-medium">ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡</p>
          <h4 class="text-xl font-bold count-word-accept text-green-600">Û°</h4>
        </div>
      </div>
      <div class="border border-gray-200 rounded-lg px-5 py-4 bg-white inline-flex gap-3 items-center justify-center shadow-sm">
        <span class="text-2xl text-yellow-500">âš ï¸</span>
        <div>
          <p class="text-xs text-gray-600 mb-1 font-medium">ØªØ§ÛŒÛŒØ¯ Ù†Ø´Ø¯Ù‡</p>
          <h4 class="text-xl font-bold count-word-not-accept text-yellow-500">Û°</h4>
        </div>
      </div>
      <div class="border border-gray-200 rounded-lg px-5 py-4 bg-white inline-flex gap-3 items-center justify-center shadow-sm">
        <span class="text-2xl text-cyan-500">ğŸ¤–</span>
        <div>
          <p class="text-xs text-gray-600 mb-1 font-medium">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø±</p>
          <h4 class="text-xl font-bold count-word-dont-need text-cyan-500">Û°</h4>
        </div>
      </div>
    </div>
    
    <!-- Filters -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <div>
        <label for="filterInput" class="block text-sm font-medium text-gray-700 mb-2 text-right">ğŸ” Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ù„Ù…Ù‡:</label>
        <input type="text" id="filterInput" placeholder="Ù…Ø«Ø§Ù„: Ø¨Ø§Ø±Ø§Ù†ØŒ Ø¯Ù„" 
               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white" />
      </div>
      <div>
        <label for="weightFilterInput" class="block text-sm font-medium text-gray-700 mb-2 text-right">âš™ï¸ ÙÛŒÙ„ØªØ± ÙˆØ²Ù†:</label>
        <div class="flex gap-2">
          <select id="weightUnitSelect" class="w-1/3 px-3 py-2 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            <!-- Options added dynamically -->
          </select>
          <input type="text" id="weightFilterInput" placeholder="ÙˆØ²Ù† (Ù…Ø«Ø§Ù„: 101)" 
                 class="w-2/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white" />
        </div>
      </div>
    </div>
    
    <!-- Collect Button - Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø¨Ø§ index -->
    <div class="text-center mb-6">
      <button onclick="showChoseWord()" 
              class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-8 rounded-lg shadow-sm transition duration-150 focus:outline-none focus:ring-2 focus:ring-blue-400">
        ğŸ“‹ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ú©Ù„Ù…Ø§Øª Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡
      </button>
    </div>
    
    <!-- Words to Verify -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8 overflow-hidden">
      <div class="bg-gray-50 px-4 py-3 border-b border-gray-200 flex justify-between items-center">
        <strong class="text-gray-800">Ú©Ù„Ù…Ø§Øª Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø¨Ø±Ø§ÛŒ ØªØ£ÛŒÛŒØ¯</strong>
        <span class="bg-gray-200 text-gray-700 px-2 py-1 rounded-full text-xs font-semibold" id="requiredCount">Û°</span>
      </div>
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead class="bg-gray-50 border-b border-gray-200">
            <tr>
              <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">#</th>
              <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ú©Ù„Ù…Ù‡</th>
              <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ù‡Ø¬Ø§Ù‡Ø§</th>
              <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ÙˆØ¶Ø¹ÛŒØª</th>
              <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ø§Ù†ØªØ®Ø§Ø¨</th>
            </tr>
          </thead>
          <tbody id="wordListBody" class="divide-y divide-gray-200 bg-white">
            <!-- Words will be displayed here -->
          </tbody>
        </table>
      </div>
    </div>
    
    <!-- Auto-calculated Words -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
      <div class="bg-gray-50 px-4 py-3 border-b border-gray-200 flex justify-between items-center">
        <strong class="text-gray-800">Ú©Ù„Ù…Ø§Øª Ø¨Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø±</strong>
        <span class="bg-gray-200 text-gray-700 px-2 py-1 rounded-full text-xs font-semibold" id="autoCount">Û°</span>
      </div>
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead class="bg-gray-50 border-b border-gray-200">
            <tr>
              <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">#</th>
              <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ú©Ù„Ù…Ù‡</th>
              <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ù‡Ø¬Ø§Ù‡Ø§</th>
              <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ÙˆØ¶Ø¹ÛŒØª</th>
              <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ø§Ù†ØªØ®Ø§Ø¨</th>
            </tr>
          </thead>
          <tbody id="wordListBody2" class="divide-y divide-gray-200 bg-white">
            <!-- Words will be displayed here -->
          </tbody>
        </table>
      </div>
    </div>
  </main>
  
  <script src="./assets/js/word-list-dont-need.js"></script>
  <script src="./assets/js/check-poem.js"></script>
  <script src="./assets/js/custome.js"></script>
  
  <script>
    function toggleNavbar() {
      const navbar = document.getElementById('navbarNav');
      navbar.classList.toggle('hidden');
      navbar.classList.toggle('flex');
      navbar.classList.toggle('flex-col');
      const toggler = document.getElementById('navbar-toggler');
      if (navbar.classList.contains('flex')) {
        toggler.innerHTML = 'âœ•';
      } else {
        toggler.innerHTML = 'â˜°';
      }
    }

    function printWords() {
      const inputText = document.querySelector('#filterInput');
      const weightInput = document.querySelector('#weightFilterInput');
      const filterValue = inputText ? inputText.value.toLowerCase() : '';
      const weightFilterValue = weightInput ? weightInput.value.toUpperCase() : '';
      
      if (!wordList || Object.keys(wordList).length === 0) {
        document.querySelector('#wordListBody').innerHTML = 
          '<tr><td colspan="5" class="px-4 py-8 text-center text-gray-500">Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</td></tr>';
        return;
      }
      
      const htmlList = Object.keys(wordList)
        .filter((item) => {
          const matchesWord = item.includes(filterValue);
          let matchesWeight = true;
          
          if (weightInput && weightInput.value !== '' && wordList[item]) {
            const shape = getShapeOfWord(wordList[item]);
            matchesWeight = shape == weightFilterValue;
          }
          
          return matchesWord && matchesWeight;
        })
        .map((item, key) => {
          let statusIcon = 'âš ï¸';
          if (acceptWordList && acceptWordList[item] != null) {
            statusIcon = 'âœ…';
          }
          
          let syllables = '';
          if (wordList[item] && wordList[item].s) {
            syllables = wordList[item].s.map(s => `<span class="syllable-badge">${s}</span>`).join('');
          }
          
          return `<tr class="hover:bg-gray-50 transition">
            <td class="px-4 py-3 text-gray-600">${key + 1}</td>
            <td class="px-4 py-3 font-medium">${item}</td>
            <td class="px-4 py-3 font-mono">${syllables}</td>
            <td class="px-4 py-3">${statusIcon}</td>
            <td class="px-4 py-3"><input name="word" value="${item}" type="checkbox" class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500" /></td>
          </tr>`;
        }).join('');
      
      document.querySelector('#wordListBody').innerHTML = htmlList;
      document.querySelector('#requiredCount').textContent = Object.keys(wordList).length;
    }

    function printWords2() {
      const inputText = document.querySelector('#filterInput');
      const weightInput = document.querySelector('#weightFilterInput');
      const filterValue = inputText ? inputText.value.toLowerCase() : '';
      const weightFilterValue = weightInput ? weightInput.value.toUpperCase() : '';
      
      if (!wordListDontNeed || Object.keys(wordListDontNeed).length === 0) {
        document.querySelector('#wordListBody2').innerHTML = 
          '<tr><td colspan="5" class="px-4 py-8 text-center text-gray-500">Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</td></tr>';
        return;
      }
      
      const htmlList = Object.keys(wordListDontNeed)
        .filter((item) => {
          const matchesWord = item.includes(filterValue);
          let matchesWeight = true;
          
          if (weightInput && weightInput.value !== '' && wordListDontNeed[item]) {
            const shape = getShapeOfWord(wordListDontNeed[item]);
            matchesWeight = shape == weightFilterValue;
          }
          
          return matchesWord && matchesWeight;
        })
        .map((item, key) => {
          let syllables = '';
          if (wordListDontNeed[item] && wordListDontNeed[item].s) {
            syllables = wordListDontNeed[item].s.map(s => `<span class="syllable-badge">${s}</span>`).join('');
          }
          
          return `<tr class="hover:bg-gray-50 transition">
            <td class="px-4 py-3 text-gray-600">${key + 1}</td>
            <td class="px-4 py-3 font-medium">${item}</td>
            <td class="px-4 py-3 font-mono">${syllables}</td>
            <td class="px-4 py-3">ğŸ¤–</td>
            <td class="px-4 py-3"><input name="word" value="${item}" type="checkbox" class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500" /></td>
          </tr>`;
        }).join('');
      
      document.querySelector('#wordListBody2').innerHTML = htmlList;
      document.querySelector('#autoCount').textContent = Object.keys(wordListDontNeed).length;
    }

    function showChoseWord() {
      const inputList = document.querySelectorAll('input[name="word"]:checked');
      const result = [...inputList].map((item) => item.value).join('\n');
      
      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(result)
          .then(() => {
            alert('âœ… Ú©Ù„Ù…Ø§Øª Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡ Ø¯Ø± Ú©Ù„ÛŒÙ¾â€ŒØ¨ÙˆØ±Ø¯ Ú©Ù¾ÛŒ Ø´Ø¯Ù†Ø¯.\n\n' + result);
          })
          .catch(err => {
            console.error('Failed to copy: ', err);
            alert('ğŸ“‹ Ú©Ù„Ù…Ø§Øª Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡:\n\n' + result);
          });
      } else {
        alert('ğŸ“‹ Ú©Ù„Ù…Ø§Øª Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡:\n\n' + result);
      }
    }

    function addBaseWordToSelect() {
      const selectElement = document.getElementById('weightUnitSelect');
      const weightInput = document.querySelector('#weightFilterInput');
      
      selectElement.innerHTML = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ²Ù†...</option>';
      
      for (const key in baseWord) {
        const option = document.createElement('option');
        option.value = key;
        const shape = baseWordShape[key] || '';
        option.textContent = key + ' = ' + shape;
        
        if (weightInput && weightInput.value.toUpperCase() == shape) {
          option.selected = true;
        }
        selectElement.appendChild(option);
      }
    }

    function choseWeight() {
      const selectElement = document.getElementById('weightUnitSelect');
      const weightInput = document.querySelector('#weightFilterInput');
      const chose = selectElement.value;
      weightInput.value = baseWordShape[chose] || '';
      printWords();
      printWords2();
    }

    // Event listeners
    document.addEventListener('DOMContentLoaded', function() {
      const filterInput = document.getElementById('filterInput');
      const weightInput = document.getElementById('weightFilterInput');
      const weightSelect = document.getElementById('weightUnitSelect');
      
      if (filterInput) {
        filterInput.addEventListener('input', function() {
          printWords();
          printWords2();
        });
      }

      if (weightInput) {
        weightInput.addEventListener('input', function() {
          printWords();
          printWords2();
          addBaseWordToSelect();
        });
      }

      if (weightSelect) {
        weightSelect.addEventListener('change', choseWeight);
      }

      printWords();
      printWords2();
      addBaseWordToSelect();
      
      const totalWords = (Object.keys(wordList || {}).length + 
                         Object.keys(wordListDontNeed || {}).length);
      const totalEl = document.getElementById('totalWords');
      if (totalEl) totalEl.textContent = totalWords;
    });
  </script>
</body>
</html>